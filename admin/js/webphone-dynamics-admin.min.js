(function(c){function d(f){try{return JSON.parse(f)}catch(g){console.error("Wrong JSON Format: "+g)}}function a(f){try{if(JSON.parse(f)){return true}else{return false}}catch(g){console.error("Wrong JSON Format: "+g);return false}}c(document).ready(function(){if(c(".webphone-dynamics-admin-plugin.useJson").length){let options={editable:false};var e=new JsonEditor("#cs_jsonDefaultSettingParametersField",d(JSON.stringify(wphdynamics_default_config_parameters_json,null,"\t")),options);let csSettingParametersFieldObject=(jQuery(".setting_parameters_field").val().trim()!="")?d(jQuery(".setting_parameters_field").val()):e.get();var f=new JsonEditor("#cs_jsonSettingParametersField",csSettingParametersFieldObject)}c(".wphdynamics_reset_paremeters").on("click",function(g){try{let jsonDefaultParams=e.get();let jsonFieldString=JSON.stringify(jsonDefaultParams,null,"\t");if(a(jsonFieldString)){f.load(jsonDefaultParams);showAlertMessage(wphdynamics_success_message_reset_default_remember_save,".webphone_dynamics_settings_changes_notice","success")}else{cs_notify_msg.error(wphdynamics_error_message_wrong_json_format);showAlertMessage(wphdynamics_error_message_wrong_json_format,".webphone_dynamics_settings_changes_notice","error")}}catch(g){console.error("Wrong JSON Format: "+g);cs_notify_msg.error(wphdynamics_error_message_wrong_json_format);showAlertMessage(wphdynamics_error_message_wrong_json_format,".webphone_dynamics_settings_changes_notice","error")}});c(".webphone_dynamics_update_json_field").on("click",function(g){try{g.preventDefault();let jsonFieldFormEditor={};if(c("#cs_jsonSettingParametersField").text()!=""){jsonFieldFormEditor=f.get()}let jsonFieldString=JSON.stringify(jsonFieldFormEditor,null,"\t");if(a(jsonFieldString)){jsonFieldString=(!jQuery.isEmptyObject(jsonFieldFormEditor))?jsonFieldString:"";c(".setting_parameters_field").val(jsonFieldString);c(".setting_parameters_field").text(jsonFieldString);c(".webphone_dynamics_save_form").submit()}else{cs_notify_msg.error(wphdynamics_error_message_wrong_json_format);showAlertMessage(wphdynamics_error_message_wrong_json_format,".webphone_dynamics_settings_changes_notice","error")}}catch(g){console.error("Wrong JSON Format: "+g);cs_notify_msg.error(wphdynamics_error_message_wrong_json_format);showAlertMessage(wphdynamics_error_message_wrong_json_format,".webphone_dynamics_settings_changes_notice","error")}});c(".webphone_dynamics_save_form").submit(function(k){var i=c(this).attr("id");if(i=="delete_all_settings"){}k.preventDefault();var j=c(this).serialize();var g=c(this).attr("action");var l=c(this).find(".spinner");var h=c(this).find(".webphone_dynamics_submit_btn");l.css({visibility:"visible"});h.css({opacity:".5",cursor:"default"}).prop("disabled",true);c.ajax({url:g,type:"POST",data:j+"&wphdynamics_admin_ajax_update="+i,success:function(m){l.css({visibility:"hidden"});h.css({opacity:"1",cursor:"pointer"}).prop("disabled",false);if(i=="delete_all_settings"){cs_notify_msg.success(wphdynamics_success_message_update_data);setTimeout(function(){window.location.reload(true)},1000)}else{cs_notify_msg.success(wphdynamics_success_message_update_data);showAlertMessage(wphdynamics_success_message_update_data,".webphone_dynamics_settings_changes_notice","success")}},error:function(){l.css({visibility:"hidden"});h.css({opacity:"1",cursor:"pointer"}).prop("disabled",false);if(i=="delete_all_settings"){cs_notify_msg.error(wphdynamics_error_message_update_data)}else{cs_notify_msg.error(wphdynamics_error_message_update_data)}}})});c("#loadWebphoneScript").on("click",function(){var g=c(".webphone_dynamics_save_form").attr("action");var i="load_webphone_script";var j=c(".spinner");var h=c(this);c.ajax({url:g,type:"POST",data:"wphdynamics_admin_ajax_update="+i,success:function(k){j.css({visibility:"hidden"});h.css({opacity:"1",cursor:"pointer"}).prop("disabled",false);if(i=="delete_all_settings"){cs_notify_msg.success(wphdynamics_success_message_update_data);setTimeout(function(){window.location.reload(true)},1000)}else{cs_notify_msg.success(wphdynamics_success_message_update_data);showAlertMessage(wphdynamics_success_message_update_data,".webphone_dynamics_settings_changes_notice","success")}},error:function(){j.css({visibility:"hidden"});h.css({opacity:"1",cursor:"pointer"}).prop("disabled",false);if(i=="delete_all_settings"){cs_notify_msg.error(wphdynamics_error_message_update_data)}else{cs_notify_msg.error(wphdynamics_error_message_update_data)}}})})})})(jQuery);var cs_notify_msg={error:function(c){var a=jQuery('<div class="notify_msg" style="background:#dd4c27; border:solid 1px #dd431c;">'+c+"</div>");this.setNotify(a)},success:function(a){var c=jQuery('<div class="notify_msg" style="background:#1de026; border:solid 1px #2bcc1c;">'+a+"</div>");this.setNotify(c)},setNotify:function(a){jQuery("body").append(a);a.stop(true,true).animate({opacity:1,top:"50px"},1000);setTimeout(function(){a.animate({opacity:0,top:"100px"},1000,function(){a.remove()})},3000)}};function showAlertMessage(c,d,a){let typeMessage=(typeof a!="undefined"&&(a=="info"||a=="success"||a=="warning"||a=="error"))?a:"info";if(!(jQuery(d+" .notice-"+typeMessage).is(":visible")&&jQuery(d+" .notice-"+typeMessage+" p").text()==c)){hideAlertMessage(d)}let noticeBoxContent='<div class="notice notice-'+typeMessage+' is-dismissible"><p>'+c+'</p><button type="button" class="notice-dismiss" onclick="event.preventDefault(); hideAlertMessage(\''+d+"');\"></button></div>";jQuery(d).html(noticeBoxContent).slideDown()}function hideAlertMessage(a){jQuery(a).slideUp()}function myAdminNotice(c,e,a,d){let div=document.createElement("div");div.classList.add("notice","is-dismissible","notice-admin-custom","notice-"+c);let p=document.createElement("p");p.appendChild(document.createTextNode(e));div.appendChild(p);let b=document.createElement("button");b.setAttribute("type","button");b.classList.add("notice-dismiss");let bSpan=document.createElement("span");bSpan.classList.add("screen-reader-text");bSpan.appendChild(document.createTextNode("Dismiss this notice"));b.appendChild(bSpan);div.appendChild(b);let referenceElement=document.getElementById(a);(d=="before")?referenceElement.parentNode.insertBefore(div,referenceElement):referenceElement.parentNode.insertBefore(div,null);b.addEventListener("click",function(){div.parentNode.removeChild(div)})};